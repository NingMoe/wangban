<script type="text/javascript"
	src="{% public scripts/ajaxfileupload.js %}"></script>
<script type="text/javascript"
	src="{% public scripts/calendar/calendar-min.js %}"></script>
<link rel="stylesheet" type="text/css"
	href="{% public scripts/calendar/calendar-min.css %}" />
<link rel="stylesheet" type="text/css"
	href="{{PageContext.CssPath}}govservice.css" />
<script src="{% public scripts/LEx.form.js %}"></script>
<style type="text/css">
</style>
<!-- <div id="printFormInfo"
	style="display:none;margin-left:auto;margin-right:0px; margin-bottom:5px; width:65px">
	<button type="button" onclick="printFormInfo()" class="nbutton_gray">打印</button>
</div> -->
<div
	style="background-color: #fff; padding:0px 0px;width:100%;margin:0px auto;">
	<section class="panel panel-default">
		<div class="panel-body">
			<table class="table table-bordered table-condensed table01"
				cellspacing="1" style="display:block;border-width:0px">
				<tbody>
					<tr>
						<th style="width: 150px;">投资项目类别：</th>
						<td><select id="projectType" name="projectType" class="span3"
							datatype="*1-100" nullmsg="此项不能为空" sucmsg=" ">
								<!-- <option value="">请选择投资项目行业分类</option>	 -->
						</select></td>
						<th style="width: 150px;">行政区划：</th>
						<td><input class="checkit" type="text" id="regionCode"
							name="regionCode" value="{{ConfigInfo.AppCity}}"
							city="{{ConfigInfo.AppCity}}" code="{{ConfigInfo.WebRegion}}"
							readonly="true" /></td>
					</tr>
				</tbody>
			</table>
			<h4>一、项目信息表</h4>
			<table class="table table-bordered table-condensed table01"
				cellspacing="1" id="sub_form" style="display:block;border-width:0px">
				<colgroup>
					<col width="20%">
					<col width="30%">
					<col width="20%">
					<col width="30%">
				</colgroup>
				<tbody id="project_body">
					<tr>
						<th style="width: 150px">基础建设：</th>
						<td><input type="radio" value="0" id="jcjs"
							name="projectCategory" checked="checked" /></td>
						<th style="width: 150px;">技术改造：</th>
						<td><input type="radio" value="1" id="jsgz"
							name="projectCategory" /></td>
					</tr>
					<tr>
						<th style="width: 150px">是否子项目：</th>
						<td id="_sfzxm" colspan="3"><input type="radio" value="1"
							id="zxm" name="isSubProject" />是
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio"
							value="0" id="fzxm" name="isSubProject" checked="checked" />否</td>
						<th id="zxmbm" style="width: 150px;display:none;"><font
							color="red">*</font>主项目编码：</th>
						<td id="_zxmbm" style="display:none;"><input type="text"
							value="" onclick="selectProject();" id="mainProjectName"
							name="mainProjectName" /> <input type="hidden" value=""
							id="mainProjectCode" name="mainProjectCode" /></td>
					</tr>
					<tr>
						<th style="width: 150px">是否重点项目：</th>
						<td id="_sfzxm" colspan="3"><input type="radio" value="1"
							id="zdxm" name="keyProject" />是
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio"
							value="0" id="fzdxm" name="keyProject" checked="checked" />否</td>

					</tr>
					<tr>
						<th>项目名称：</th>
						<td colspan="3"><input value="" id="projectName"
							field="projectName" name="projectName" type="text"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>建设性质：</th>
						<td colspan="3"><select id="constructPer" name="constructPer"
							class="span3" datatype="*1-100" nullmsg="此项不能为空"
							style="width:300px" sucmsg=" ">
						</select>
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>建设地点区划：</th>
						<td colspan="3"><select id="provinceCode" name="provinceCode"
							class="span3" datatype="*1-100" nullmsg="此项不能为空"
							style="width:100px" sucmsg=" ">
						</select> <select id="cityCode" name="cityCode" class="span3"
							datatype="*1-100" nullmsg="此项不能为空" style="width:100px" sucmsg=" ">
						</select> <select id="countyCode" name="countyCode" class="span3"
							datatype="*1-100" nullmsg="此项不能为空" style="width:100px" sucmsg=" ">
						</select>
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>建设地点：</th>
						<td colspan="3"><input type="radio" name="placeCode" id="ks"
							value="ks" /> <label for="ks">跨省区</label> <input
							type="radio" name="placeCode" id="kj" value="kj" /> <label
							for="kj">跨境</label> <input type="radio" name="placeCode" id="jw"
							value="jw" /> <label for="jw">境外</label> <input type="radio"
							name="placeCode" id="sn" value="sn" checked /> <label for="sn">省内</label>
						</td>
					</tr>
					<tr>
						<th>详细地址：</th>
						<td colspan="3"><input value="" id="placeAreaDetail"
							field="placeAreaDetail" name="placeAreaDetail" type="text"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>国标行业：</th>
						<td><input type="text" id="industryName" name="industryName" value=""
							code="" readonly="true" onclick="selectIndustry();" />
							<div class="Validform_checktip"></div></td>
						<th>拟开工时间（精确到年份）：</th>
						<td><input value="" id="startYear" class="checkit"
							onblur="checkstartYear()" name="startYear" type="text"
							datatype="" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th style="width: 150px">拟建成时间（精确到年份）：</th>
						<td><input value="" id="endYear" field="endYear"
							name="endYear" type="text" class="checkit"
							onblur="checkendYear()" datatype="" nullmsg="此项不能为空" sucmsg=" " />
							<div class="Validform_checktip"></div>
						</td>
						<th>总投资（万元）：</th>
						<td><input value="" id="investment"
							onkeyup="value=value.replace(/[^\d+\.?\d*]/g,'') "
							onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^/d{1,}[.]{0,1}/d{0,}]/g,''))"
							field="investment" name="investment" type="text"
							onblur="checkinvestment()" class="span3 checkit" datatype=""
							nullmsg="此项不能为空" sucmsg=" " />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr id="tzxmhyfl" style="display:none;">
						<th>投资项目行业分类：</th>
						<td colspan="3"><select id="permitIndustry"
							name="permitIndustry" class="span3" datatype="*1-100"
							nullmsg="此项不能为空" style="width:300px" sucmsg=" ">
						</select>
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr id="hyhzml" style="display:none;">
						<th>行业核准目录：</th>
						<td colspan="3"><select id="permitItemCode"
							name="permitItemCode" class="span3" datatype="*1-100"
							nullmsg="此项不能为空" style="width:300px" sucmsg=" ">
						</select>
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>建设规模及内容：</th>
						<td colspan="3"><textarea value="" cols="100"
								style="width: 86%" id="projectContent" name="projectContent"
								class="checkit" onblur="checkprojectContent()" sucmsg=" "
								datatype="*1-100"></textarea>
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>是否开发区项目：</th>
						<td><select id="isDeArea" name="isDeArea" class="span3">
								<option value="0">非开发区项目</option>
								<option value="1">开发区项目</option>
						</select>
							<div class="Validform_checktip"></div>
						</td>
						<th style="width: 150px"><font id="spdl" color="red"
							style="display:block;">*</font>是否申请审批代理服务：</th>
						<td><input type="radio" value="1" id="spdlsq"
							name="isApplyAgentService" checked="checked" />申请
							&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" value="0"
							id="spdlbsq" name="isApplyAgentService" />不申请
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr id="kfqmc" style="display:none;">
						<th>开发区名称：</th>
						<td colspan="3"><input value="" id="deAreaName"
							field="deAreaName" name="deAreaName" type="text" class="span3"
							datatype="*1-100" nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
				</tbody>
				<tbody id="dcCompany_body">
					<tr>
						<td colspan="4">
							<h4>二、企业信息表</h4></td>
					</tr>
					<tr>
						<th>项目（法人）单位：</th>
						<td colspan="3"><input value="" id="contractor"
							field="contractor" name="contractor" type="text"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>项目法人证照类型：</th>
						<td colspan="3"><select id="lerepCerttype"
							name="lerepCerttype" class="span3" datatype="*1-100"
							nullmsg="此项不能为空" style="width:86%" sucmsg=" ">
						</select>
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>项目法人证照号码：</th>
						<td colspan="3"><input value="" id="lerepNo" field="lerepNo"
							name="lerepNo" type="text" class="span3 checkit"
							datatype="*1-100" nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
				</tbody>
				<tbody id="contectInformation_body">
					<tr>
						<td colspan="4">
							<h4>三、联系人信息表</h4></td>
					</tr>
					<tr>
						<th>项目负责人：</th>
						<td><input value="" id="projectManagerName"
							field="projectManagerName" name="projectManagerName" type="text"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
						<th>职务：</th>
						<td><input value="" id="position" field="position"
							name="position" type="text" class="span3 checkit"
							datatype="*1-100" nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>项目负责人手机：</th>
						<td><input value="" id="projectManagerPhone"
							field="projectManagerPhone" name="projectManagerPhone"
							type="text" onblur="checkprojectManagerPhone()"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
						<th>项目负责人邮箱：</th>
						<td><input value="" id="projectManagerEmail"
							field="projectManagerEmail" name="projectManagerEmail"
							type="text" onblur="checkprojectManagerEmail()"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>项目负责人qq：</th>
						<td><input value="" id="projectManagerQq"
							field="projectManagerQq" name="projectManagerQq" type="text"
							class="span3" datatype="*1-100" nullmsg="此项不能为空" sucmsg=" "
							style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
						<th>项目负责人微信：</th>
						<td><input value="" id="projectManagerWechat" field="projectManagerWechat"
							name="projectManagerWechat" type="text" class="span3" datatype="*1-100"
							nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>联系人：</th>
						<td><input value="" id="linkMan" field="linkMan"
							name="linkMan" type="text" class="span3 checkit"
							datatype="*1-100" nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
						<th>联系人手机：</th>
						<td><input value="" id="linkPhone" field="linkPhone"
							name="linkPhone" type="text" onblur="checklinkPhone()"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>联系人邮箱：</th>
						<td><input value="" id="contactEmail" field="contactEmail"
							name="contactEmail" type="text" onblur="checkcontactEmail()"
							class="span3 checkit" datatype="*1-100" nullmsg="此项不能为空"
							sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
						<th>联系人qq：</th>
						<td><input value="" id="contactQq" field="contactQq"
							name="contactQq" type="text" class="span3" datatype="*1-100"
							nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>
					<tr>
						<th>联系人微信：</th>
						<td><input value="" id="contactWechat" field="contactWechat"
							name="contactWechat" type="text" class="span3" datatype="*1-100"
							nullmsg="此项不能为空" sucmsg=" " style="width: 86%;" />
							<div class="Validform_checktip"></div>
						</td>
					</tr>

				</tbody>
			</table>
	</section>
</div>
<script type="text/javascript">
	$(function() {
		$("#printFormInfo").show();

	})
	function printFormInfo() {
		$("#cfBody").printArea();
	}
	$(function(){
	initDict();	
	addOption("projectType",TZSPXMLX);//加载类别
	addOption("constructPer",TZSPJSXZ);//加载建设性质
	addOption("provinceCode",TZSPSJBM);//加载省
	addOption("cityCode",TZSPSBM);//加载市
	addOption("countyCode",TZSPXJBM);//加载县
	//addOption("industry",TZXMLX);//加载所属行业
	addOption("lerepCerttype",ZSTZXMFRZZLX);//加载项目法人证照类型	
	addOption("permitIndustry",TZXMHYFL);
	
	initpermitItemCode($("#permitIndustry option:selected").val());
	initdata();
});
//加载行业核准目录
function initpermitItemCode(code){
	var cmd = new LEx.Command("app.icity.pro.ProCmd");
	cmd.setParameter("regionCode", $("#regionCode").attr("code"));
	cmd.setParameter("permitIndustry", code);
	cmd.setParameter("projectType", $("#projectType option:selected").val());
	var ret = cmd.execute("getCatalogInfo");
	if(!ret.error){
		$("#permitItemCode").empty();
		addOption("permitItemCode",ret.data);
	}else{
		LEx.alert(ret.error);
	}
}
function initdata(){
	var cmd = new LEx.Command("app.icity.pro.ProCmd");
	cmd.setParameter("projectId", "{{id}}");
	cmd.setParameter("projectCode", "{{code}}");
	var ret = cmd.execute("getInfoByProjectCode");
	if(!ret.error){
		LEx.form.set("contectInformation_body",ret.data.contectInfo,"name");
		LEx.form.set("dcCompany_body",ret.data.dcCompany,"name");
		LEx.form.set("project_body",ret.data.projectInfo,"name");
		
		$("#projectType").attr("value",ret.data.projectInfo.projectType);
		
		if(ret.data.projectInfo.placeCode == "跨省区" || ret.data.projectInfo.placeCode == "000000"){
			$("input[name='placeCode'][value='ks']").attr("checked",true);
		}else if(ret.data.projectInfo.placeCode == "跨境" || ret.data.projectInfo.placeCode == "000001"){
			$("input[name='placeCode'][value='kj']").attr("checked",true);
		}else if(ret.data.projectInfo.placeCode == "境外" || ret.data.projectInfo.placeCode == "000002"){
			$("input[name='placeCode'][value='jw']").attr("checked",true);
		}else{
			$("input[name='placeCode'][value='sn']").attr("checked",true);
		}
	}else{
		LEx.alert(ret.error);
	}
	
}
//初始化字典
function initDict(){
	var command = new LEx.Command("app.icity.pro.ProCmd");
	command.setParameter("dictCode", "TZSPJDJD,TZSPXMJD,TZSPXMLX,ZSTZXMFRZZLX,TZSPJSXZ,TZXMLX,TZXMHYFL,TZSPSJBM,TZSPSBM,TZSPXJBM,TZXMSPLXMJD,TZXMHZLXMJD,TZXMBALXMJD,A00001,A00002,A00003,TZXMSBXMJD");
	var ret = command.execute("getDictInfo");
	if(!command.error){		
		TZSPXMLX = ret.data.info[0].TZSPXMLX;
		ZSTZXMFRZZLX = ret.data.info[0].ZSTZXMFRZZLX;
		TZSPJSXZ = ret.data.info[0].TZSPJSXZ;
		TZXMLX = ret.data.info[0].TZXMLX;
		TZXMHYFL = ret.data.info[0].TZXMHYFL;
		TZSPSJBM = ret.data.info[0].TZSPSJBM;
		TZSPSBM = ret.data.info[0].TZSPSBM;
		TZSPXJBM = ret.data.info[0].TZSPXJBM;
		TZSPSSJD = ret.data.info[0].TZSPSSJD;
		TZXMSPLXMJD = ret.data.info[0].TZXMSBXMJD;
		TZXMHZLXMJD = ret.data.info[0].TZXMHZLXMJD;
		TZXMBALXMJD = ret.data.info[0].TZXMBALXMJD;
		TZSPJDJD = ret.data.info[0].TZSPJDJD;
		TZSPXMJD = ret.data.info[0].TZSPXMJD;
		SPSECTYPE = ret.data.info[0].A00001;
		HZSECTYPE = ret.data.info[0].A00002;
		BASECTYPE = ret.data.info[0].A00003;
	}
}
function addOption(sid,dict){
	var len = dict.length;
	for(var i=0;i<len;i++){
		$("#"+sid).append("<option value='"+dict[i].code+"'>"+dict[i].name+"</option>");
	}	
}
</script>